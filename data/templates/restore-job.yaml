{{- if eq ((.Values.manual).templating) "restore" }}
{{- $suspend := list nil true | has ((.Values.manual).restore).suspend }}
{{- $subtasks := ((.Values.manual).restore).subtasks | default nil }}
{{- $maintenance := ((.Values.manual).restore).maintenance }}
{{- $keycloackRealmKeysRotation := ((.Values.manual).restore).keycloakRealmKeysRotation}}
{{- $argsJobSpec := dict "root" .
                         "typeJob" "manualRestore"
                         "suspend" $suspend
                         "subtasks" $subtasks
                         "maintenance" $maintenance
                         "keycloakRealmKeysRotation" $keycloackRealmKeysRotation }}
apiVersion: batch/v1
kind: Job
metadata:
  name: {{ include "data-manager.job-restore.name" . }}
spec:
  {{- include "data-manager.job-spec" $argsJobSpec | indent 2 }}
{{- end }}
